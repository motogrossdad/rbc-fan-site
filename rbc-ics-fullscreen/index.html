<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>RBC Roosendaal 25/26</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
  <style>
    :root { --bg:#0b1020; --card:#141a2f; --accent:#ff8c00; --muted:#94a3b8; --text:#e5e7eb; }
    body { margin:0; font-family:Inter,system-ui,sans-serif; background:var(--bg); color:var(--text); }
    header { position:sticky; top:0; background:rgba(11,16,32,.8); border-bottom:1px solid rgba(255,255,255,.06); }
    nav { max-width:1100px; margin:0 auto; display:flex; justify-content:space-between; padding:.75rem 1rem; }
    .brand { font-weight:800; }
    .links a { color:var(--text); margin-left:1rem; text-decoration:none; font-weight:600; }

    .grid { display:grid; grid-template-columns:1fr; gap:1rem; max-width:1100px; margin:1rem auto; padding:0 1rem; }
    .card { background:var(--card); border:1px solid rgba(255,255,255,.06); border-radius:.8rem; padding:1rem; }

    /* Teletext full screen */
    .iframe-viewport { width:100%; height:85vh; border-radius:.8rem; background:#0e1224; border:0; overflow:hidden; }
    .iframe-viewport iframe { width:100%; height:100%; border:0; transform:none !important; }
    @media(max-width:480px){ .iframe-viewport{ height:80vh; } }

    /* Squad */
    .squad { display:grid; grid-template-columns:repeat(auto-fill,minmax(150px,1fr)); gap:.8rem; }
    .player { background:rgba(255,255,255,.05); border-radius:.6rem; padding:.6rem; text-align:center; }
    .player img { width:100%; border-radius:.6rem; aspect-ratio:1/1; object-fit:cover; }
  </style>
</head>
<body>
  <header>
    <nav>
      <div class="brand">RBC Roosendaal</div>
      <div class="links">
        <a href="#tables">Tables</a>
        <a href="#fixtures">Fixtures</a>
        <a href="#squad">Squad</a>
      </div>
    </nav>
  </header>

  <main class="grid">
    <section class="card" id="tables">
      <h2>Tables</h2>
      <h3>Standings</h3>
      <div class="iframe-viewport"><iframe src="https://teletekst-data.nos.nl/webplus?p=835-2"></iframe></div>
      <h3>Results</h3>
      <div class="iframe-viewport"><iframe src="https://teletekst-data.nos.nl/webplus?p=835-1"></iframe></div>
    </section>

    <section class="card" id="fixtures">
      <h2>Fixtures</h2>
      <ul id="fixtures-list"></ul>
      <p id="fixtures-empty">No fixtures to show.</p>
    </section>

    <section class="card" id="squad">
      <h2>Squad</h2>
      <div class="squad" id="squad-list"></div>
    </section>
  </main>

  <footer style="text-align:center; color:var(--muted); padding:1rem;">© <span id="year"></span> RBC Roosendaal</footer>

  <script src="./assets/script.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/ical.js@1.4.0/build/ical.min.js"></script>
  <script>
    document.getElementById('year').textContent=new Date().getFullYear();
    (async function initFixtures(){
      const list=document.getElementById('fixtures-list'); const empty=document.getElementById('fixtures-empty');
      try{
        const res=await fetch('./data/rbc.ics?v='+Date.now()); const ics=await res.text();
        const jcal=ICAL.parse(ics); const comp=new ICAL.Component(jcal);
        const fixtures=comp.getAllSubcomponents('vevent').map(v=>new ICAL.Event(v));
        list.innerHTML=''; fixtures.forEach(ev=>{
          const li=document.createElement('li');
          li.textContent=ev.startDate.toJSDate().toLocaleString('nl-NL')+' — '+ev.summary;
          list.appendChild(li);
        });
      }catch(e){ empty.style.display='block'; }
    })();
  </script>
</body>
</html>
