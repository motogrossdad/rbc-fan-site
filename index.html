<!doctype html>
<html lang="nl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>RBC Roosendaal 25/26</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg:#0b1020;
      --card:#141a2f;
      --accent:#f1942d;
      --muted:#94a3b8;
      --text:#e5e7eb;
    }
    body{margin:0;font-family:Inter,system-ui,sans-serif;background:var(--bg);color:var(--text);}
    header{position:sticky;top:0;background:var(--accent);border-bottom:1px solid rgba(255,255,255,.15);z-index:10;}
    nav{max-width:1100px;margin:0 auto;display:flex;justify-content:space-between;align-items:center;padding:.75rem 1rem;}
    .brand{font-weight:800;font-size:1.1rem;display:flex;align-items:center;color:#fff;}
    .brand img{height:40px;margin-right:.5rem;border-radius:.25rem;}
    .links a{color:#fff;margin-left:1rem;text-decoration:none;font-weight:600;}
    .links a:hover{opacity:.9;}

    .grid{display:grid;grid-template-columns:1fr;gap:1rem;max-width:1100px;margin:1rem auto;padding:0 1rem;}
    .card{background:var(--card);border:1px solid rgba(255,255,255,.06);border-radius:.8rem;padding:1rem;}
    h2{margin:0 0 .6rem;}
    h3{margin:.8rem 0 .4rem;color:var(--accent);}
    .muted{color:var(--muted);}
    footer{text-align:center;color:var(--muted);padding:1rem;font-size:.9rem;border-top:1px solid rgba(255,255,255,.06);margin-top:2rem;}

    /* Teletext iframes */
    .iframe-viewport{width:100%;height:80vh;border-radius:.8rem;background:#0e1224;border:0;overflow:hidden;margin-bottom:1rem;}
    .iframe-viewport iframe{width:100%;height:100%;border:0;}
    @media (max-width:640px){ .iframe-viewport{height:65vh;} }

    /* Fixtures */
    .fixtures-wrapper{width:100%;overflow:auto;border-radius:.6rem;}
    table.fixtures{width:100%;border-collapse:collapse;font-size:0.9rem;min-width:680px;}
    table.fixtures th,table.fixtures td{border:1px solid rgba(255,255,255,.15);padding:.5rem .6rem;text-align:center;}
    table.fixtures th{background:rgba(241,148,45,.15);color:var(--accent);font-weight:600;position:sticky;top:0;z-index:2;}

    /* Next 5 box */
    .next5{background:linear-gradient(180deg, rgba(241,148,45,.18), rgba(241,148,45,.06));border:1px solid rgba(241,148,45,.35);border-radius:.8rem;overflow:hidden;}
    .next5-header{background:var(--accent);color:#0b1020;padding:.6rem .8rem;font-weight:800;letter-spacing:.02em;}
    .next5-list{list-style:none;margin:0;padding:.8rem;}
    .next5-list li{padding:.45rem .4rem;border-bottom:1px dashed rgba(255,255,255,.08);}
    .next5-list li:last-child{border-bottom:none;}
    .next5-list strong{color:#fff;}

    /* Squad */
    .squad{display:grid;grid-template-columns:repeat(auto-fill,minmax(150px,1fr));gap:.8rem;}
    .player{background:rgba(255,255,255,.05);border-radius:.6rem;padding:.6rem;text-align:center;position:relative;overflow:hidden;}
    .player img{width:100%;border-radius:.6rem;margin-bottom:.5rem;display:block;}
    .player h3{margin:.3rem 0;font-size:1rem;}
    .player .badge{position:absolute;top:.5rem;left:.5rem;background:var(--accent);color:#fff;padding:.2rem .5rem;border-radius:.5rem;font-weight:700;font-size:.8rem;box-shadow:0 2px 6px rgba(0,0,0,.3);}

    /* Twitter / X card */
    .twitter-card{border:1px solid rgba(255,255,255,.08);border-radius:.8rem;overflow:hidden;background:rgba(255,255,255,.03);}
    .twitter-card h2{background:rgba(241,148,45,.15);padding:.6rem .8rem;margin:0;border-bottom:1px solid rgba(241,148,45,.25);color:var(--accent);}
    .tw-wrap{padding:.75rem;}
    .tw-fallback{font-size:.9rem;color:var(--muted);margin-top:.5rem;}
    .tw-btn{display:inline-block;background:var(--accent);color:#0b1020;font-weight:800;border:none;border-radius:.5rem;padding:.5rem .75rem;cursor:pointer;}
    .tw-btn:disabled{opacity:.6;cursor:default;}
  </style>
</head>
<body>
  <header>
    <nav>
      <div class="brand">
        <img src="./assets/logo.png" alt="RBC Logo" onerror="this.style.display='none'">
        <span id="brand-text">RBC Roosendaal 25/26</span>
      </div>
      <div class="links">
        <a href="#tables">Stand</a>
        <a href="#fixtures">Programma</a>
        <a href="#squad">Selectie</a>
      </div>
    </nav>
  </header>

  <main class="grid">
    <!-- Next 5 -->
    <section class="card next5">
      <div class="next5-header">Komende 5 wedstrijden</div>
      <ul id="next5" class="next5-list">
        <li class="muted">Laden…</li>
      </ul>
    </section>

    <!-- Standings and Results -->
    <section class="card" id="tables">
      <h2>Stand & Uitslagen</h2>
      <h3>Stand</h3>
      <div class="iframe-viewport">
        <iframe src="https://teletekst-data.nos.nl/webplus?p=835-2" title="NOS Teletekst — Stand"></iframe>
      </div>
      <h3>Uitslagen</h3>
      <div class="iframe-viewport">
        <iframe src="https://teletekst-data.nos.nl/webplus?p=835-1" title="NOS Teletekst — Uitslagen"></iframe>
      </div>
    </section>

    <!-- Fixtures -->
    <section class="card" id="fixtures">
      <h2>Programma & Resultaten</h2>

      <h3>KNVB Beker 2025/2026</h3>
      <div class="fixtures-wrapper">
        <table class="fixtures">
          <thead>
            <tr>
              <th>Ronde</th><th>Datum</th><th>Tijd</th><th>Plaats</th><th>Tegenstander</th><th>Uitslag</th>
            </tr>
          </thead>
          <tbody id="cup-body"></tbody>
        </table>
      </div>

      <h3>Derde Divisie B 2025/2026</h3>
      <div class="fixtures-wrapper">
        <table class="fixtures">
          <thead>
            <tr>
              <th>Ronde</th><th>Datum</th><th>Tijd</th><th>Plaats</th><th>Tegenstander</th><th>Uitslag</th>
            </tr>
          </thead>
          <tbody id="league-body"></tbody>
        </table>
      </div>
    </section>

    <!-- Squad -->
    <section class="card" id="squad">
      <h2>Selectie</h2>
      <div class="squad" id="squad-list"></div>
      <p id="squad-empty" class="muted" style="display:none">Nog geen spelers toegevoegd.</p>
    </section>

    <!-- Twitter / X -->
    <section class="twitter-card" id="live-updates">
      <h2>Live updates</h2>
      <div class="tw-wrap">
        <p class="muted" id="tw-status">Voor betere prestaties wordt X pas geladen op verzoek.</p>
        <button id="load-x" class="tw-btn">Klik om live updates te laden</button>
        <div id="tw-container" style="margin-top:.6rem;"></div>
        <div id="tw-fallback" class="tw-fallback" style="display:none;">
          Zie je geen live tweets? Mogelijk blokkeert je browser of is X tijdelijk beperkt (429).
          <a href="https://twitter.com/RBCvoetbal" target="_blank" rel="noopener">Open @RBCvoetbal op X</a>.
        </div>
      </div>
    </section>
  </main>

  <footer>
    © <span id="year"></span> RBC Roosendaal • Fan website
  </footer>

  <script>
    document.getElementById('year').textContent=new Date().getFullYear();

    // On-demand X/Twitter loader to avoid 429 rate limits
    (function setupTwitterOnDemand(){
      const btn = document.getElementById('load-x');
      const statusEl = document.getElementById('tw-status');
      const wrap = document.getElementById('tw-container');
      const fallback = document.getElementById('tw-fallback');
      if (!btn || !wrap) return;

      function injectTimeline(){
        // Prevent multiple loads
        btn.disabled = true;
        statusEl.textContent = 'Bezig met laden…';
        fallback.style.display = 'none';

        // Anchor required by widgets.js
        const a = document.createElement('a');
        a.className = 'twitter-timeline';
        a.href = 'https://twitter.com/RBCvoetbal';
        a.setAttribute('data-height','650');
        a.setAttribute('data-theme','dark');
        a.setAttribute('data-dnt','true');
        a.setAttribute('data-chrome','noheader nofooter noborders transparent');
        a.textContent = 'Tweets by @RBCvoetbal';
        wrap.appendChild(a);

        // Only add the script once
        if (!document.querySelector('script[src*="platform.twitter.com/widgets.js"]')) {
          const s = document.createElement('script');
          s.async = true;
          s.src = 'https://platform.twitter.com/widgets.js';
          s.charset = 'utf-8';
          document.body.appendChild(s);
        } else if (window.twttr && window.twttr.widgets && window.twttr.widgets.load) {
          // If already present, just tell it to parse
          window.twttr.widgets.load(wrap);
        }

        // If after ~6s nothing rendered, show fallback (likely 429 or blocked)
        setTimeout(function(){
          const iframe = wrap.querySelector('iframe');
          if (!iframe) {
            fallback.style.display = 'block';
            statusEl.textContent = 'Niet gelukt om X te laden.';
            btn.disabled = false;
            btn.textContent = 'Opnieuw proberen';
          } else {
            statusEl.textContent = 'Live tweets geladen.';
          }
        }, 6000);
      }

      btn.addEventListener('click', injectTimeline);
    })();
  </script>

  <script src="./assets/script.js?v=2"></script>
</body>
</html>
